<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ğŸ’– Sudoku Solver for You ğŸ’–</title>
<style>
  body { font-family: 'Arial', sans-serif; text-align: center; background: #fff0f5; color: #333; }
  h1 { color: #ff69b4; }
  table { margin: auto; border-collapse: collapse; }
  td { border: 1px solid #999; width: 40px; height: 40px; }
  input { width: 38px; height: 38px; text-align: center; font-size: 18px; }
  td:nth-child(3), td:nth-child(6) { border-right: 2px solid #ff69b4; }
  tr:nth-child(3) td, tr:nth-child(6) td { border-bottom: 2px solid #ff69b4; }
  button { margin: 20px; padding: 10px 20px; font-size: 16px; background: #ff69b4; color: white; border: none; border-radius: 5px; cursor: pointer; }
  button:hover { background: #ff1493; }
</style>
</head>
<body>
<h1>ğŸ’– Sudoku Solver ğŸ’–</h1>
<p>Enter your puzzle and press Solve!</p>

<table id="sudoku-grid"></table>

<button onclick="startSolving()">Solve</button>

<script>
// --- Create the 9x9 input grid ---
const table = document.getElementById("sudoku-grid");
let cells = [];

for (let i = 0; i < 9; i++) {
  let row = [];
  let tr = document.createElement("tr");
  for (let j = 0; j < 9; j++) {
    let td = document.createElement("td");
    let input = document.createElement("input");
    input.type = "number";
    input.min = 0;          // allow 0 visually
    input.max = 9;
    input.value = "0";      // start filled with zeros

    // --- Auto-move to next cell when a number is entered ---
    input.addEventListener("input", () => {
      let v = input.value;

      // keep only digits, and clamp to 0..9
      if (v === "") {
        input.value = "0";
        return;
      }
      let n = parseInt(v, 10);
      if (Number.isNaN(n)) n = 0;
      if (n < 0) n = 0;
      if (n > 9) n = 9;
      input.value = String(n);

      // If user entered 1..9, jump to next cell
      if (n >= 1 && n <= 9) {
        focusNext(i, j);
      }
    });

    td.appendChild(input);
    tr.appendChild(td);
    row.push(input);
  }
  table.appendChild(tr);
  cells.push(row);
}

// Move focus to next cell (wrap to next row; wrap end -> top)
function focusNext(i, j) {
  let nextI = i;
  let nextJ = j + 1;

  if (nextJ >= 9) {
    nextJ = 0;
    nextI = i + 1;
  }
  if (nextI >= 9) {
    nextI = 0; // if last cell, go back to top-left
  }

  cells[nextI][nextJ].focus();
  cells[nextI][nextJ].select();
}

// --- Helper functions ---
function getGrid() {
  // Treat displayed 0 as empty for solving
  return cells.map(row => row.map(cell => {
    let val = parseInt(cell.value, 10);
    return (val >= 1 && val <= 9) ? val : 0;
  }));
}

function setGrid(grid) {
  for (let i = 0; i < 9; i++)
    for (let j = 0; j < 9; j++)
      // show 0 instead of blank
      cells[i][j].value = (grid[i][j] >= 1 && grid[i][j] <= 9) ? grid[i][j] : 0;
}

function isValid(grid, row, col, num) {
  for (let i = 0; i < 9; i++) {
    if (grid[row][i] === num || grid[i][col] === num) return false;
  }
  let startRow = Math.floor(row/3)*3;
  let startCol = Math.floor(col/3)*3;
  for (let i=startRow; i<startRow+3; i++)
    for (let j=startCol; j<startCol+3; j++)
      if (grid[i][j] === num) return false;
  return true;
}

// --- Async Solver for animation ---
async function solve(grid) {
  for (let i=0; i<9; i++) {
    for (let j=0; j<9; j++) {
      if (grid[i][j] === 0) {
        for (let num=1; num<=9; num++) {
          if (isValid(grid,i,j,num)) {
            grid[i][j] = num;
            setGrid(grid);
            await new Promise(r=>setTimeout(r,30));
            if (await solve(grid)) return true;
            grid[i][j] = 0;
            setGrid(grid);
            await new Promise(r=>setTimeout(r,30));
          }
        }
        return false;
      }
    }
  }
  return true;
}

// --- Start solving ---
async function startSolving() {
  let grid = getGrid();
  if (!await solve(grid)) {
    alert("âŒ No solution exists for this puzzle.");
  } else {
    alert("âœ… Puzzle solved! ğŸ’–");
  }
}
</script>
</body>
</html>
